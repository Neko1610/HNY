<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Happy New Year 2026</title>

<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:black;
  font-family:monospace;
}

canvas{
  position:fixed;
  inset:0;
}

/* START */
#startBtn{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:black;
  color:#00ff99;
  font-size:3rem;
  cursor:pointer;
  z-index:40;
  text-shadow:0 0 25px #00ff99;
}

/* COUNTDOWN */
#countdown{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:20;
  pointer-events:none;
}

.matrix{
  display:grid;
  grid-template-columns: repeat(7, 22px);
  gap:6px;
}

.cell{
  width:32px;
  height:32px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:48px;
  color:#ffffff;
  opacity:0.15;
}

.cell.on{
  opacity:1;
  text-shadow:0 0 15px #ffffff;
}

/* MERGE TEXT */
#mergeText{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:5rem;
  color:#ffffff;
  text-shadow:0 0 35px orange;
  z-index:25;
  pointer-events:none;
}

.merge-char{
  position:absolute;
  opacity:0;
}

/* WISH */
#wish{
  position:fixed;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%) scale(0.8);
  font-size:2.3rem;
  color:#ffd700;
  text-shadow:0 0 30px orange;
  opacity:0;
  transition:opacity 1.2s ease, transform 1.2s ease;
  z-index:30;
  text-align:center;
}
#matrix{
  z-index:1;
}

#c{
  z-index:5;
}

#countdown{
  z-index:10;
}

#mergeText{
  z-index:15;
}

#wish{
  z-index:20;
}

#startBtn{
  z-index:50;
}
</style>
</head>

<body>

<div id="startBtn">B·∫Øt ƒê·∫ßu</div>

<canvas id="matrix"></canvas>
<div id="countdown"></div>
<div id="mergeText"></div>

<canvas id="c"></canvas>
<div id="wish"></div>

<audio id="music" src="music.mp3" loop></audio>

<script>
/* ================= BASIC ================= */
const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
const music=document.getElementById("music");
music.volume=0.8;

/* ================= FULL GRID MATRIX ================= */
const mCanvas = document.getElementById("matrix");
const mCtx = mCanvas.getContext("2d");

function resizeMatrix(){
  mCanvas.width = innerWidth;
  mCanvas.height = innerHeight;
}
resizeMatrix();

const fontSize = 14;
let cols, rows;

function updateGrid(){
  cols = Math.floor(mCanvas.width / fontSize);
  rows = Math.floor(mCanvas.height / fontSize);
}
updateGrid();

let matrixRunning = false;

function drawMatrix(){
  if(!matrixRunning) return;

  mCtx.fillStyle = "rgba(0,0,0,0.35)";
  mCtx.fillRect(0,0,mCanvas.width,mCanvas.height);

  mCtx.font = fontSize + "px monospace";

  for(let y=0;y<rows;y++){
    for(let x=0;x<cols;x++){
      if(Math.random() < 0.06){
        const ch = chars[Math.floor(Math.random()*chars.length)];
        const glow = Math.random() > 0.92;

        mCtx.fillStyle = glow ? "#9affc9" : "#00ff99";
        if(glow){
          mCtx.shadowBlur = 12;
          mCtx.shadowColor = "#00ff99";
        }else{
          mCtx.shadowBlur = 0;
        }

        mCtx.fillText(ch, x*fontSize, y*fontSize);
      }
    }
  }
}

setInterval(drawMatrix, 60);

window.onresize = ()=>{
  resizeMatrix();
  updateGrid();
};
/* ================= COUNTDOWN ================= */
const numbers={
 3:["0111110","0000011","0011110","0000011","0111110"],
 2:["0111110","0000011","0111110","0110000","0111111"],
 1:["0011000","0111000","0011000","0011000","0111110"]
};
const letters = {
  C:[
   "0111110",
   "1100001",
   "1100000",
   "1100001",
   "0111110"
  ],
  H:[
   "1100011",
   "1100011",
   "1111111",
   "1100011",
   "1100011"
  ],
  U:[
   "1100011",
   "1100011",
   "1100011",
   "1100011",
   "0111110"
  ],
  M:[
   "1100011",
   "1110111",
   "1101011",
   "1100011",
   "1100011"
  ],
  N:[
   "1100011",
   "1110011",
   "1101011",
   "1100111",
   "1100011"
  ],
  G:[
   "0111110",
   "1100000",
   "1100111",
   "1100011",
   "0111110"
  ],
  O:[
   "0111110",
   "1100011",
   "1100011",
   "1100011",
   "0111110"
  ],
  I:[
   "0111110",
   "0011000",
   "0011000",
   "0011000",
   "0111110"
  ],
  " ":[
   "0000000",
   "0000000",
   "0000000",
   "0000000",
   "0000000"
  ],
  "2":numbers[2],
  "0":[
   "0111110",
   "1100111",
   "1101011",
   "1110011",
   "0111110"
  ],
  "6":[
   "0111110",
   "1100000",
   "1111110",
   "1100011",
   "0111110"
  ]
};

let cellTimer;
function showNumber(n){
  const cd=document.getElementById("countdown");
  cd.innerHTML="";
  const grid=document.createElement("div");
  grid.className="matrix";

  numbers[n].forEach(r=>{
    r.split("").forEach(b=>{
      const c=document.createElement("div");
      c.className="cell"+(b==="1"?" on":"");
      c.innerText=chars[Math.floor(Math.random()*chars.length)];
      grid.appendChild(c);
    });
  });
  cd.appendChild(grid);

  clearInterval(cellTimer);
  cellTimer=setInterval(()=>{
    grid.querySelectorAll(".cell").forEach(c=>{
      c.innerText=chars[Math.floor(Math.random()*chars.length)];
      c.style.opacity=c.classList.contains("on")
        ? Math.random()*0.5+0.6
        : Math.random()*0.15+0.05;
    });
  },70);
}

/* ================= MERGE TEXT ================= */
function showMergeText(){
  return new Promise(resolve=>{
    const text="HAPPY NEW YEAR 2026";
    const box=document.getElementById("mergeText");
    box.innerHTML="";
    box.style.opacity=1;

    const centerX=innerWidth/2;
    const centerY=innerHeight/2;

    [...text].forEach((ch,i)=>{
      const span=document.createElement("span");
      span.className="merge-char";
      span.innerText=ch;
      span.style.left=Math.random()*innerWidth+"px";
      span.style.top=Math.random()*innerHeight+"px";
      box.appendChild(span);

      setTimeout(()=>{
        span.style.transition="all 1.5s ease";
        span.style.left=centerX- text.length*14 + i*28 +"px";
        span.style.top=centerY+"px";
        span.style.opacity=1;
      },i*80);
    });

    setTimeout(()=>{
      box.style.opacity=0;
      resolve();
    },3500);
  });
}

/* ================= FIREWORK ================= */
const c=document.getElementById("c");
const ctx=c.getContext("2d");
c.width=innerWidth;
c.height=innerHeight;

let particles=[], started=false;

class Particle{
  constructor(x,y,vx,vy,color,delayExplode=false){
    this.x=x; this.y=y;
    this.vx=vx; this.vy=vy;
    this.life=160;
    this.color=color;
    this.delayExplode = delayExplode;
    this.freeze = delayExplode ? 25 : 0; // ƒë·ª©ng y√™n ~25 frame
  }

  update(){
    if(this.freeze>0){
      this.freeze--;
    }else{
      this.x+=this.vx;
      this.y+=this.vy;
      this.vy+=0.03;
    }

    this.life--;
    ctx.fillStyle=this.color;
    ctx.beginPath();
    ctx.arc(this.x,this.y,2.2,0,Math.PI*2);
    ctx.fill();

    return this.life>0;
  }
}

function explodeHeart(x,y){
  const color="hotpink";
  let heartParticles=[];

  for(let t=0;t<Math.PI*2;t+=0.18){
    const px = 16*Math.pow(Math.sin(t),3);
    const py = -(
      13*Math.cos(t)
      -5*Math.cos(2*t)
      -2*Math.cos(3*t)
      -Math.cos(4*t)
    );

    const p=new Particle(
      x+px,
      y+py,
      px*0.04,
      py*0.04,
      color,
      true // ‚ù§Ô∏è gi·ªØ form
    );

    heartParticles.push(p);
    particles.push(p);
  }

  // üí• tan nh·∫π
  setTimeout(()=>{
    heartParticles.forEach(p=>{
      particles.push(
        new Particle(
          p.x,p.y,
          (Math.random()-0.5)*2.5,
          (Math.random()-0.5)*2.5,
          p.color
        )
      );
    });
  },650);
}



function explodeStar(x,y){
  const spikes=5;
  const outer=28;
  const inner=12;
  const color="gold";

  let starParticles=[];

  for(let i=0;i<spikes*2;i++){
    const r = i%2===0 ? outer : inner;
    const a = i*Math.PI/spikes;

    const px = Math.cos(a)*r;
    const py = Math.sin(a)*r;

    const p = new Particle(
      x+px,
      y+py,
      px*0.04,
      py*0.04,
      color,
      true // üî• gi·ªØ form
    );

    starParticles.push(p);
    particles.push(p);
  }

  // üí• TAN RA SAU 600ms
setTimeout(()=>{
  starParticles.forEach(p=>{
    particles.push(
      new Particle(
        p.x,
        p.y,
        (Math.random()-0.5)*2.5, // üëà Y·∫æU H∆†N
        (Math.random()-0.5)*2.5,
        p.color
      )
    );
  });
},600);
}



function explodeNormal(x,y){
  const count = 140; // üëà NHI·ªÄU H∆†N
  for(let i=0;i<count;i++){
    const a = Math.random()*Math.PI*2;
    const s = Math.random()*5 + 3; // üëà L·ª∞C M·∫†NH H∆†N

    particles.push(
      new Particle(
        x,
        y,
        Math.cos(a)*s,
        Math.sin(a)*s,
        `hsl(${Math.random()*360},100%,70%)`
      )
    );
  }
}

class Rocket {
  constructor() {
    this.x = Math.random() * c.width;
    this.y = c.height;
    this.vx = (Math.random() - 0.5) * 1;
    this.vy = -(Math.random() * 4 + 7);
    this.targetY = Math.random() * c.height * 0.4 + 50;
    this.color = `hsl(${Math.random()*360},100%,70%)`;
    this.exploded = false;
  }

  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.vy += 0.05;

    // v·∫Ω v·ªát bay
    ctx.fillStyle = this.color;
    ctx.beginPath();
    ctx.arc(this.x, this.y, 2.5, 0, Math.PI * 2);
    ctx.fill();

    if (this.y <= this.targetY) {
      this.explode();
      return false;
    }
    return true;
  }

explode(){
  const r=Math.random();

  if(r<0.35) explodeHeart(this.x,this.y);
  else if(r<0.6) explodeStar(this.x,this.y);
  else explodeNormal(this.x,this.y);

  showWish();
}

}
let rockets = [];

function explode(){
  const x=Math.random()*c.width;
  const y=Math.random()*c.height*0.45;

  const r=Math.random();

  if(r<0.3){
    explodeHeart(x,y);
  }
  else if(r<0.6){
    explodeStar(x,y);
  }
  else{
    explodeNormal(x,y);
  }

  showWish();
}

function loop(){
  if(started){
    ctx.fillStyle="rgba(0,0,0,0.25)";
    ctx.fillRect(0,0,c.width,c.height);

    // t·∫°o rocket m·ªõi
    if(Math.random() < 0.008){
  rockets.push(new Rocket());
}

    // c·∫≠p nh·∫≠t rocket
    rockets = rockets.filter(r => r.update());

    // c·∫≠p nh·∫≠t m·∫£nh n·ªï
    particles = particles.filter(p => p.update());

  }else{
    ctx.clearRect(0,0,c.width,c.height);
  }

  requestAnimationFrame(loop);
}


loop(); // üöÄ D√íNG QUAN TR·ªåNG NH·∫§T



/* ================= WISH ================= */
const wishes = [
  // --- c≈© ---
  "üéâ Ch√∫c m·ª´ng nƒÉm m·ªõi 2026 üéâ",
  "üå∏ B√¨nh an ‚Äì H·∫°nh ph√∫c üå∏",
  "üí∞ Ph√°t t√†i ‚Äì Ph√°t l·ªôc üí∞",
  "‚ú® V·∫°n s·ª± nh∆∞ √Ω ‚ú®",
  "‚ù§Ô∏è Gia ƒë√¨nh h·∫°nh ph√∫c ‚ù§Ô∏è",
  "üöÄ Th√†nh c√¥ng r·ª±c r·ª° üöÄ",
  "üéØ M·ª•c ti√™u n√†o c≈©ng ƒë·∫°t üéØ",
  "üòÑ C∆∞·ªùi nhi·ªÅu h∆°n bu·ªìn üòÑ",
  "üåü NƒÉm m·ªõi nhi·ªÅu may m·∫Øn üåü",
  "üî• Nhi·ªát huy·∫øt c·∫£ nƒÉm üî•",
  "üìà S·ª± nghi·ªáp thƒÉng ti·∫øn üìà",
  "üíº C√¥ng vi·ªác thu·∫≠n l·ª£i üíº",
  "üìö H·ªçc g√¨ c≈©ng v√¥ üìö",
  "üß† T√¢m an ‚Äì Tr√≠ s√°ng üß†",
  "üéÅ Ni·ªÅm vui ng·∫≠p tr√†n üéÅ",
  "üçÄ ƒêi·ªÅu t·ªët lu√¥n ƒë·∫øn üçÄ",
  "üíñ Y√™u th∆∞∆°ng ƒë·ªß ƒë·∫ßy üíñ",
  "üèÜ Th√†nh c√¥ng vi√™n m√£n üèÜ",
  "üåà Cu·ªôc s·ªëng r·ª±c r·ª° üåà",
  "üéÜ M·ªôt nƒÉm m·ªõi b√πng n·ªï üéÜ",

  // --- th√™m 20 c√¢u m·ªõi ---
  "‚ú® M·ªçi ∆∞·ªõc m∆° ƒë·ªÅu th√†nh hi·ªán th·ª±c ‚ú®",
  "üí´ NƒÉm m·ªõi nhi·ªÅu c∆° h·ªôi m·ªõi üí´",
  "üå± Kh·ªüi ƒë·∫ßu m·ªõi ‚Äì Th√†nh c√¥ng m·ªõi üå±",
  "üî• D√°m nghƒ© ‚Äì D√°m l√†m ‚Äì D√°m th√†nh c√¥ng üî•",
  "üéØ ƒêi ƒë√∫ng h∆∞·ªõng ‚Äì V·ªÅ ƒë√∫ng ƒë√≠ch üéØ",
  "üíé Gi√° tr·ªã b·∫£n th√¢n ng√†y c√†ng tƒÉng üíé",
  "üöÄ Bay cao ‚Äì Bay xa h∆°n n·ªØa üöÄ",
  "üßß L·ªôc ƒë·∫ßy t√∫i ‚Äì Ti·ªÅn ƒë·∫ßy tay üßß",
  "‚ù§Ô∏è Y√™u ƒë√∫ng ng∆∞·ªùi ‚Äì S·ªëng ƒë√∫ng ch·∫•t ‚ù§Ô∏è",
  "üòå √çt lo nghƒ© ‚Äì Nhi·ªÅu an nhi√™n üòå",
  "üåû M·ªói ng√†y ƒë·ªÅu l√† ng√†y vui üåû",
  "‚ö° NƒÉng l∆∞·ª£ng t√≠ch c·ª±c quanh nƒÉm ‚ö°",
  "üéµ Cu·ªôc s·ªëng lu√¥n ƒë√∫ng nh·ªãp üéµ",
  "üåç ƒêi nhi·ªÅu n∆°i ‚Äì G·∫∑p nhi·ªÅu ƒëi·ªÅu hay üåç",
  "üíª Code m∆∞·ª£t ‚Äì Deadline nh·∫π üíª",
  "üêâ B·ª©t ph√° m·∫°nh m·∫Ω c·∫£ nƒÉm üêâ",
  "üìä K·∫øt qu·∫£ lu√¥n v∆∞·ª£t mong ƒë·ª£i üìä",
  "üéá T·ªèa s√°ng theo c√°ch ri√™ng üéá",
  "üå† May m·∫Øn lu√¥n ·ªü ph√≠a b·∫°n üå†",
  "üèÖ M·ªçi n·ªó l·ª±c ƒë·ªÅu ƒë∆∞·ª£c ƒë·ªÅn ƒë√°p üèÖ"
];

let wi=0,showing=false;

function showWish(){
  if(showing) return;
  showing=true;
  const w=document.getElementById("wish");
  w.innerText=wishes[wi++%wishes.length];
  w.style.opacity=1;
  w.style.transform="translate(-50%,-50%) scale(1)";
  setTimeout(()=>{
    w.style.opacity=0;
    w.style.transform="translate(-50%,-50%) scale(0.8)";
    showing=false;
  },3000);
}

/* ================= FLOW ================= */
document.getElementById("startBtn").onclick=async ()=>{
  document.getElementById("startBtn").style.display="none";
  music.play().catch(()=>{});

  matrixRunning=true; // n·ªÅn ch·∫°y NGAY

  let seq=[3,2,1],i=0;
  const t=setInterval(async ()=>{
    if(i<seq.length){
      showNumber(seq[i++]);
    }else{
      clearInterval(t);
      document.getElementById("countdown").innerHTML="";

    await showMergeText();   // ch·ªØ ch·∫°y tr√™n n·ªÅn matrix

matrixRunning=false;    // t·∫Øt matrix
mCtx.clearRect(0,0,mCanvas.width,mCanvas.height);

started=true;           // üî• PH√ÅO HOA B·∫ÆT ƒê·∫¶U ·ªû ƒê√ÇY

    }
  },1000);
};

window.onresize=()=>{
  mCanvas.width=c.width=innerWidth;
  mCanvas.height=c.height=innerHeight;
};
</script>

</body>
</html>
